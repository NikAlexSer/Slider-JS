function sendValues(n){slider=new Slider(n),slider.init(),slider.render()}function main(){$('.input-form input[name="button"]').click(function(){preview=new Preview,preview.init(),preview.render()})}var slider,preview;$(document).ready(function(){main()});var Preview=function(){function n(){d=$("#preview-template").html(),p=Handlebars.compile(d)}function e(n){f={urls:n},v=p(f)}function i(){$("body").append(v)}function t(){var n=$("#arrayURL").val().split(",");return n.forEach(function(n,e,i){i[e]=i[e].replace(/["\n \u005B\u005D]/g,"")}),n}function o(n,e){n.forEach(function(n,i,t){w[i]={img:t[i],com:e[i]}})}function r(){h.splice($(this).parent().index(),1),j.render()}function s(){$(".comment").each(function(n){x[n]=$(".comment")[n].value}),a.hide(),o(h,x),sendValues(w)}function c(){a=$(".js-slider-preview"),l=$('.js-slider-preview input[value="Удалить"]'),u=$('.js-slider-preview input[value="Сохранить"]'),l.on("click",r),u.on("click",s)}var a,l,u,d,p,f,v,m=[],h=[],x=[],w=[],j=this;this.init=function(){h=m=t(),$(".input-form").hide(),n()},this.render=function(){$(".js-slider-preview").remove(),e(h),i(),c()}},Slider=function(n){function e(){j=$("#slider-template").html(),b=Handlebars.compile(j)}function i(n){k={slidesTemp:n},g=b(k)}function t(){$("body").append(g)}function o(){f=$(".control-next"),v=$(".control-prev"),m=$(".js-content-holder li"),w=$(".js-slider"),x=$(".js-content-holder"),h=$(".js-nav span"),h.eq(I).addClass("on"),d=m.first(),p=m.last(),C=!1,a=temp=m.length,u=$(".js-content-holder img").width(),x.css({width:u*a})}function r(){f.on("click",function(){c(1)}),v.on("click",function(){c(-1)}),w.on("mouseenter",function(){clearInterval(l)}).on("mouseleave",function(){s()})}function s(){l=setInterval(function(){c(1)},E)}function c(n){if(!C)switch($(".on").removeClass("on"),C=!0,I+=n,h.eq(I).addClass("on"),console.log("Ahtung!",I),I){case-1:h.eq(a-1).addClass("on"),p.prependTo(x),x.transition({x:(I+2)*-u+"px"},0),x.transition({x:(I+1)*-u+"px"},300,"easeInOutExpo",function(){I=a-1,p.appendTo(x),x.transition({x:I*-u+"px"},0),C=!1});break;case a:h.eq(0).addClass("on"),d.appendTo(x),x.transition({x:(I-2)*-u+"px"},0),x.transition({x:(I-1)*-u+"px"},300,"easeInOutExpo",function(){I=0,d.prependTo(x),x.transition({x:I*-u+"px"},0),C=!1});break;default:x.transition({x:I*-u+"px"},300,"easeInOutExpo",function(){C=!1})}}var a,l,u,d,p,f,v,m,h,x,w,j,b,k,g,I=0,C=!1,E=1e3;this.init=function(){e()},this.render=function(){clearInterval(l),$(".js-slider").remove(),i(n),t(),o(),r(),s()}};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJwcmV2aWV3LmpzIiwic2xpZGVyLmpzIl0sIm5hbWVzIjpbInNlbmRWYWx1ZXMiLCJhcnJheVNsaWRlcyIsInNsaWRlciIsIlNsaWRlciIsImluaXQiLCJyZW5kZXIiLCJtYWluIiwiJCIsImNsaWNrIiwicHJldmlldyIsIlByZXZpZXciLCJkb2N1bWVudCIsInJlYWR5IiwiX3RlbXBsYXRlSW5pdCIsInNvdXJjZSIsImh0bWwiLCJ0ZW1wbGF0ZSIsIkhhbmRsZWJhcnMiLCJjb21waWxlIiwiX3RlbXBsYXRlSW5zZXJ0RGF0YSIsInVybEFycmF5IiwiY29udGV4dCIsInVybHMiLCJodG1sUHJldmlldyIsIl90ZW1wbGF0ZUJ1aWxkIiwiYXBwZW5kIiwiX2Zvcm1hdGlvbkFycmF5IiwidmFsIiwic3BsaXQiLCJmb3JFYWNoIiwiaXRlbSIsImkiLCJyZXBsYWNlIiwiX2V4dHJhY3RWYWx1ZXMiLCJzbGlkZXMiLCJjb21tZW50cyIsImltZyIsImNvbSIsIl9kZWxldGVDb250ZW50IiwiYXJyYXlPZkltYWdlcyIsInNwbGljZSIsInRoaXMiLCJwYXJlbnQiLCJpbmRleCIsIiR0aGlzIiwiX3NhdmVDb250ZW50IiwiZWFjaCIsImFycmF5T2ZDb21tZW50cyIsInZhbHVlIiwiJHByZXZpZXdCbG9jayIsImhpZGUiLCJfcHJlcGFyZVByZXZpZXciLCIkYnV0dG9uRGVsIiwiJGJ1dHRvblNhdmUiLCJvbiIsInJlbW92ZSIsInNvdXJjZVNsaWRlcyIsInRlbXBsYXRlU2xpZGVzIiwiY29udGV4dFNsaWRlcyIsInNsaWRlc1RlbXAiLCJodG1sU2xpZGVzIiwiX3ByZXBhcmVBbmltYXRpb24iLCIkbmV4dCIsIiRwcmV2IiwiJHNsaWRlcyIsIiRzbGlkZXIiLCIkaG9sZGVyIiwiJGJ1bGxldHMiLCJlcSIsImFkZENsYXNzIiwiZmlyc3RJdGVtIiwiZmlyc3QiLCJsYXN0SXRlbSIsImxhc3QiLCJpc0FuaW1hdGluZyIsInRvdGFsU2xpZGVzIiwidGVtcCIsImxlbmd0aCIsInNsaWRlV2lkdGgiLCJ3aWR0aCIsImNzcyIsIl9hZGRFdmVudHMiLCJfc2xpZGUiLCJjbGVhckludGVydmFsIiwiX2ludGVydmFsIiwiX3NldHRpbmdJbnRlcnZhbCIsInNldEludGVydmFsIiwiZHVyYXRpb24iLCJkaXJlY3Rpb24iLCJyZW1vdmVDbGFzcyIsImNvbnNvbGUiLCJsb2ciLCJwcmVwZW5kVG8iLCJ0cmFuc2l0aW9uIiwieCIsImFwcGVuZFRvIl0sIm1hcHBpbmdzIjoiQUFFQSxRQUFBQSxZQUFBQyxHQUNBQyxPQUFBLEdBQUFDLFFBQUFGLEdBQ0FDLE9BQUFFLE9BQ0FGLE9BQUFHLFNBRUEsUUFBQUMsUUFDQUMsRUFBQSxvQ0FBQUMsTUFBQSxXQUNBQyxRQUFBLEdBQUFDLFNBQ0FELFFBQUFMLE9BQ0FLLFFBQUFKLFdBWEEsR0FBQUgsUUFDQU8sT0FhQUYsR0FBQUksVUFBQUMsTUFBQSxXQUNBTixRQ2ZBLElBQUFJLFNBQUEsV0FjQSxRQUFBRyxLQUNBQyxFQUFBUCxFQUFBLHFCQUFBUSxPQUNBQyxFQUFBQyxXQUFBQyxRQUFBSixHQUVBLFFBQUFLLEdBQUFDLEdBQ0FDLEdBQUFDLEtBQUFGLEdBQ0FHLEVBQUFQLEVBQUFLLEdBRUEsUUFBQUcsS0FDQWpCLEVBQUEsUUFBQWtCLE9BQUFGLEdBR0EsUUFBQUcsS0FDQSxHQUFBTixHQUFBYixFQUFBLGFBQUFvQixNQUFBQyxNQUFBLElBSUEsT0FIQVIsR0FBQVMsUUFBQSxTQUFBQyxFQUFBQyxFQUFBWCxHQUNBQSxFQUFBVyxHQUFBWCxFQUFBVyxHQUFBQyxRQUFBLHNCQUFBLE1BRUFaLEVBRUEsUUFBQWEsR0FBQUMsRUFBQUMsR0FDQUQsRUFBQUwsUUFBQSxTQUFBQyxFQUFBQyxFQUFBRyxHQUNBakMsRUFBQThCLElBQUFLLElBQUFGLEVBQUFILEdBQUFNLElBQUFGLEVBQUFKLE1BR0EsUUFBQU8sS0FLQUMsRUFBQUMsT0FBQWpDLEVBQUFrQyxNQUFBQyxTQUFBQyxRQUFBLEdBQ0FDLEVBQUF2QyxTQUVBLFFBQUF3QyxL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RUFBQW5ELEdBQUFtQyxFQUFBLE1BQUEsSUFBQSxnQkFBQSxXQUNBSixHQUFBLEtBdkdBLEdBQ0FDLEdBQ0FTLEVBQ0FOLEVBRUFSLEVBQ0FFLEVBRUFWLEVBQ0FDLEVBQ0FDLEVBQ0FHLEVBQ0FELEVBQ0FELEVBQ0FULEVBQ0FDLEVBQ0FDLEVBQ0FFLEVBakJBakIsRUFBQSxFQUlBK0IsR0FBQSxFQUdBYSxFQUFBLEdBcUdBOUMsTUFBQXJDLEtBQUEsV0FDQVMsS0FFQTRCLEtBQUFwQyxPQUFBLFdBRUE4RSxjQUFBQyxHQUNBN0UsRUFBQSxjQUFBZ0QsU0FFQXBDLEVBQUFsQixHQUNBdUIsSUFDQXFDLElBQ0FvQixJQUNBSSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHNsaWRlcixcbiAgcHJldmlldztcbmZ1bmN0aW9uIHNlbmRWYWx1ZXMoYXJyYXlTbGlkZXMpIHtcbiAgc2xpZGVyID0gbmV3IFNsaWRlcihhcnJheVNsaWRlcyk7XG4gIHNsaWRlci5pbml0KCk7XG4gIHNsaWRlci5yZW5kZXIoKTtcbn07XG5mdW5jdGlvbiBtYWluKCkge1xuICAkKCcuaW5wdXQtZm9ybSBpbnB1dFtuYW1lPVwiYnV0dG9uXCJdJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgcHJldmlldyA9IG5ldyBQcmV2aWV3KCk7XG4gICAgcHJldmlldy5pbml0KCk7XG4gICAgcHJldmlldy5yZW5kZXIoKTtcbiAgfSk7XG59XG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgbWFpbigpO1xufSk7XG5cbi8qXG5bXG4gICAgXCJodHRwczovL2MyLnN0YXRpY2ZsaWNrci5jb20vNC8zMTE3LzMxNzUwMTQwNTJfNzQ4NGRhMTIwNV96LmpwZ1wiLFxuICAgIFwiaHR0cHM6Ly9jMi5zdGF0aWNmbGlja3IuY29tLzQvMzI2Mi8zMTc1MDE0NTU0X2RiNTk3YmJiNzNfei5qcGdcIixcbiAgICBcImh0dHBzOi8vYzIuc3RhdGljZmxpY2tyLmNvbS80LzM2NzAvODgxMzU2MjUxMl8yMjlmNWNmMjRhX3ouanBnXCIsXG4gICAgXCJodHRwczovL2MxLnN0YXRpY2ZsaWNrci5jb20vOS84NDQwLzc3ODcyMzc1MTZfYjQ2YWE1ZmFiYl9jLmpwZ1wiLFxuICAgIFwiaHR0cHM6Ly9jMi5zdGF0aWNmbGlja3IuY29tLzQvMzQwNC8zNDQ5NTI2MzcxXzA0NTQ1MTViMTNfei5qcGdcIixcbiAgICBcImh0dHBzOi8vYzIuc3RhdGljZmxpY2tyLmNvbS80LzM2MDIvMzQ1MDMyMzY1OF9hYjU5NjFhMGFhX3ouanBnXCIsXG4gICAgXCJodHRwczovL2MxLnN0YXRpY2ZsaWNrci5jb20vMy8yNDkxLzM3NTE2NDczNzVfNDY5NWIzNzhkZV96LmpwZ1wiLFxuICAgIFwiaHR0cHM6Ly9jMS5zdGF0aWNmbGlja3IuY29tLzMvMjQ0My8zNzUyNDI2MTk4X2ViZTAzZmE2MTVfei5qcGdcIixcbiAgICBcImh0dHBzOi8vYzIuc3RhdGljZmxpY2tyLmNvbS8yLzEwMzIvMzE3NTAyMjA2Nl81N2ZjZTUwNWJlX3ouanBnXCIsXG4gICAgXCJodHRwczovL2MxLnN0YXRpY2ZsaWNrci5jb20vMy8yNTI4LzM3NTE2MjQ1NzNfMDg4MTVmODk1MF96LmpwZ1wiXG5dXG4qLyIsInZhciBQcmV2aWV3ID0gZnVuY3Rpb24oKSB7XG4gIHZhciB1cmxBcnJheSA9IFtdLFxuICAgIGFycmF5T2ZJbWFnZXMgPSBbXSxcbiAgICBhcnJheU9mQ29tbWVudHMgPSBbXSxcbiAgICBhcnJheVNsaWRlcyA9IFtdLFxuICAgICR0aGlzID0gdGhpcyxcbiAgICAkcHJldmlld0Jsb2NrLFxuICAgICRidXR0b25EZWwsXG4gICAgJGJ1dHRvblNhdmUsXG4gICAgc291cmNlLFxuICAgIHRlbXBsYXRlLFxuICAgIGNvbnRleHQsXG4gICAgaHRtbFByZXZpZXc7XG4gICAgXG4gIGZ1bmN0aW9uIF90ZW1wbGF0ZUluaXQoKSB7XG4gICAgc291cmNlID0gJChcIiNwcmV2aWV3LXRlbXBsYXRlXCIpLmh0bWwoKTtcbiAgICB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShzb3VyY2UpO1xuICB9O1xuICBmdW5jdGlvbiBfdGVtcGxhdGVJbnNlcnREYXRhKHVybEFycmF5KSB7XG4gICAgY29udGV4dCA9IHt1cmxzOiB1cmxBcnJheX07XG4gICAgaHRtbFByZXZpZXcgPSB0ZW1wbGF0ZShjb250ZXh0KTtcbiAgfTtcbiAgZnVuY3Rpb24gX3RlbXBsYXRlQnVpbGQoKSB7XG4gICAgJCgnYm9keScpLmFwcGVuZChodG1sUHJldmlldyk7XG4gIH07XG4gIFxuICBmdW5jdGlvbiBfZm9ybWF0aW9uQXJyYXkoKSB7XG4gICAgdmFyIHVybEFycmF5ID0gJCgnI2FycmF5VVJMJykudmFsKCkuc3BsaXQoJywnKTtcbiAgICB1cmxBcnJheS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpLCB1cmxBcnJheSkge1xuICAgICAgdXJsQXJyYXlbaV0gPSB1cmxBcnJheVtpXS5yZXBsYWNlKC9bXCJcXG4gXFx1MDA1QlxcdTAwNURdL2csICcnKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdXJsQXJyYXk7XG4gIH07XG4gIGZ1bmN0aW9uIF9leHRyYWN0VmFsdWVzKHNsaWRlcywgY29tbWVudHMpIHtcbiAgICBzbGlkZXMuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpLCBzbGlkZXMpIHtcbiAgICAgIGFycmF5U2xpZGVzW2ldID0ge2ltZzogc2xpZGVzW2ldLCBjb206IGNvbW1lbnRzW2ldfTtcbiAgICB9KTtcbiAgfTtcbiAgZnVuY3Rpb24gX2RlbGV0ZUNvbnRlbnQoKSB7XG4gICAgLypcbiAgICAgICQodGhpcykg0L/QvtGC0L7QvNGDINGH0YLQviBwYXJlbnQoKSDQv9GA0LjQvNC10L3Rj9C10YLRgdGPINC6INC+0LHRitC10LrRgtGDIEpxdWVyeSxcbiAgICAgINCwICQodGhpcykg0LTQsNC10YIg0YLQsNC60L7QuSDQvtCx0YrQtdC60YIg0LIg0LrQvtC90YLQtdC60YHRgtC1INC90LDQttC40LzQsNC10LzQvtC5INC60L3QvtC/0LrQuFxuICAgICovXG4gICAgYXJyYXlPZkltYWdlcy5zcGxpY2UoJCh0aGlzKS5wYXJlbnQoKS5pbmRleCgpLCAxKTtcbiAgICAkdGhpcy5yZW5kZXIoKTtcbiAgfTtcbiAgZnVuY3Rpb24gX3NhdmVDb250ZW50KCkge1xuICAgICQoJy5jb21tZW50JykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICBhcnJheU9mQ29tbWVudHNbaV0gPSAkKCcuY29tbWVudCcpW2ldLnZhbHVlO1xuICAgICAgICB9KTtcbiAgICAkcHJldmlld0Jsb2NrLmhpZGUoKTtcbiAgICBfZXh0cmFjdFZhbHVlcyhhcnJheU9mSW1hZ2VzLCBhcnJheU9mQ29tbWVudHMpO1xuICAgIHNlbmRWYWx1ZXMoYXJyYXlTbGlkZXMpO1xuICB9O1xuICBmdW5jdGlvbiBfcHJlcGFyZVByZXZpZXcoKSB7XG4gICAgJHByZXZpZXdCbG9jayA9ICQoJy5qcy1zbGlkZXItcHJldmlldycpO1xuICAgICRidXR0b25EZWwgPSAgJCgnLmpzLXNsaWRlci1wcmV2aWV3IGlucHV0W3ZhbHVlPVwi0KPQtNCw0LvQuNGC0YxcIl0nKTtcbiAgICAkYnV0dG9uU2F2ZSA9ICQoJy5qcy1zbGlkZXItcHJldmlldyBpbnB1dFt2YWx1ZT1cItCh0L7RhdGA0LDQvdC40YLRjFwiXScpO1xuICAgICRidXR0b25EZWwub24oXCJjbGlja1wiLCBfZGVsZXRlQ29udGVudCk7XG4gICAgJGJ1dHRvblNhdmUub24oXCJjbGlja1wiLCBfc2F2ZUNvbnRlbnQpO1xuICB9O1xuICB0aGlzLmluaXQgPSBmdW5jdGlvbigpe1xuICAgIGFycmF5T2ZJbWFnZXMgPSB1cmxBcnJheSA9IF9mb3JtYXRpb25BcnJheSgpO1xuICAgICQoJy5pbnB1dC1mb3JtJykuaGlkZSgpO1xuICAgIF90ZW1wbGF0ZUluaXQoKTtcbiAgfTtcbiAgdGhpcy5yZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICAkKCcuanMtc2xpZGVyLXByZXZpZXcnKS5yZW1vdmUoKTsgLy/Rg9C00LDQu9C10L3QuNC1INGB0YLQsNGA0YvRhS/Qv9GD0YHRgtGL0YUg0L/RgNC10LLRjNGO0YUg0L/QtdGA0LXQtCDRgNC10L3QtNC10YDQvtC8XG4gICAgX3RlbXBsYXRlSW5zZXJ0RGF0YShhcnJheU9mSW1hZ2VzKTtcbiAgICBfdGVtcGxhdGVCdWlsZCgpO1xuICAgIF9wcmVwYXJlUHJldmlldygpO1xuICB9O1xufTsiLCJ2YXIgU2xpZGVyID0gZnVuY3Rpb24oYXJyYXlTbGlkZXMpIHtcbiAgdmFyIGluZGV4ID0gMCwgLy8gY291bnRlclxuICAgIHRvdGFsU2xpZGVzLFxuICAgIF9pbnRlcnZhbCwgLy8gZm9yIHNldEludGVydmFsXG4gICAgc2xpZGVXaWR0aCxcbiAgICBpc0FuaW1hdGluZyA9IGZhbHNlLFxuICAgIGZpcnN0SXRlbSxcbiAgICBsYXN0SXRlbSxcbiAgICBkdXJhdGlvbiA9IDEwMDAsXG4gICAgJG5leHQsXG4gICAgJHByZXYsXG4gICAgJHNsaWRlcyxcbiAgICAkYnVsbGV0cyxcbiAgICAkaG9sZGVyLFxuICAgICRzbGlkZXIsXG4gICAgc291cmNlU2xpZGVzLFxuICAgIHRlbXBsYXRlU2xpZGVzLFxuICAgIGNvbnRleHRTbGlkZXMsXG4gICAgaHRtbFNsaWRlcztcblxuICAvLyBIYW5kbGViYXJzIGZ1bmN0aW9uc1xuICBmdW5jdGlvbiBfdGVtcGxhdGVJbml0KCkge1xuICAgIHNvdXJjZVNsaWRlcyA9ICQoXCIjc2xpZGVyLXRlbXBsYXRlXCIpLmh0bWwoKTtcbiAgICB0ZW1wbGF0ZVNsaWRlcyA9IEhhbmRsZWJhcnMuY29tcGlsZShzb3VyY2VTbGlkZXMpO1xuICB9XG4gIGZ1bmN0aW9uIF90ZW1wbGF0ZUluc2VydERhdGEoYXJyYXlTbGlkZXMpIHtcbiAgICBjb250ZXh0U2xpZGVzID0ge3NsaWRlc1RlbXA6IGFycmF5U2xpZGVzfTtcbiAgICBodG1sU2xpZGVzID0gdGVtcGxhdGVTbGlkZXMoY29udGV4dFNsaWRlcyk7XG4gIH1cbiAgZnVuY3Rpb24gX3RlbXBsYXRlQnVpbGQoKSB7XG4gICAgJCgnYm9keScpLmFwcGVuZChodG1sU2xpZGVzKTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gX3ByZXBhcmVBbmltYXRpb24oKSB7XG4gICAgJG5leHQgPSAkKCcuY29udHJvbC1uZXh0Jyk7XG4gICAgJHByZXYgPSAgJCgnLmNvbnRyb2wtcHJldicpO1xuICAgICRzbGlkZXMgPSAkKCcuanMtY29udGVudC1ob2xkZXIgbGknKTtcbiAgICAkc2xpZGVyID0gJCgnLmpzLXNsaWRlcicpO1xuICAgICRob2xkZXIgPSAkKCcuanMtY29udGVudC1ob2xkZXInKTtcbiAgICAkYnVsbGV0cyA9ICQoJy5qcy1uYXYgc3BhbicpO1xuICAgICRidWxsZXRzLmVxKGluZGV4KS5hZGRDbGFzcygnb24nKTtcbiAgICBmaXJzdEl0ZW0gPSAkc2xpZGVzLmZpcnN0KCk7XG4gICAgbGFzdEl0ZW0gPSAkc2xpZGVzLmxhc3QoKTtcbiAgICBpc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgIHRvdGFsU2xpZGVzID0gdGVtcCA9ICRzbGlkZXMubGVuZ3RoO1xuICAgIHNsaWRlV2lkdGggPSAkKCcuanMtY29udGVudC1ob2xkZXIgaW1nJykud2lkdGgoKTtcbiAgICAkaG9sZGVyLmNzcyh7d2lkdGg6IHNsaWRlV2lkdGggKiAodG90YWxTbGlkZXMpfSk7XG4gIH07XG4gIGZ1bmN0aW9uIF9hZGRFdmVudHMoKSB7XG4gICAgJG5leHQub24oJ2NsaWNrJywgKGZ1bmN0aW9uKCkge1xuICAgICAgX3NsaWRlKDEpO1xuICAgIH0pKTtcbiAgICAkcHJldi5vbignY2xpY2snLCAoZnVuY3Rpb24oKSB7XG4gICAgICBfc2xpZGUoLTEpO1xuICAgIH0pKTtcbiAgICAkc2xpZGVyXG4gICAgICAub24oJ21vdXNlZW50ZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChfaW50ZXJ2YWwpO1xuICAgICAgfSlcbiAgICAgIC5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBfc2V0dGluZ0ludGVydmFsKCk7XG4gICAgfSk7XG4gICAgXG4gIH07XG4gIGZ1bmN0aW9uIF9zZXR0aW5nSW50ZXJ2YWwoKSB7XG4gICAgX2ludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgX3NsaWRlKDEpO1xuICAgIH0sIGR1cmF0aW9uKTtcbiAgfTtcbiAgZnVuY3Rpb24gX3NsaWRlKGRpcmVjdGlvbikge1xuICAgIGlmIChpc0FuaW1hdGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAkKCcub24nKS5yZW1vdmVDbGFzcygnb24nKTtcbiAgICBpc0FuaW1hdGluZyA9IHRydWU7XG4gICAgaW5kZXggKz0gZGlyZWN0aW9uO1xuICAgICRidWxsZXRzLmVxKGluZGV4KS5hZGRDbGFzcygnb24nKTtcbiAgICBjb25zb2xlLmxvZygnQWh0dW5nIScsIGluZGV4KTtcbiAgICBzd2l0Y2ggKGluZGV4KSB7XG4gICAgICBjYXNlIC0xOlxuICAgICAgICAkYnVsbGV0cy5lcSh0b3RhbFNsaWRlcyAtIDEpLmFkZENsYXNzKCdvbicpO1xuICAgICAgICBsYXN0SXRlbS5wcmVwZW5kVG8oJGhvbGRlcik7XG4gICAgICAgICRob2xkZXIudHJhbnNpdGlvbih7eDogKGluZGV4ICsgMikgKiAtc2xpZGVXaWR0aCArICdweCd9LCAwKTtcbiAgICAgICAgJGhvbGRlci50cmFuc2l0aW9uKHt4OiAoaW5kZXggKyAxKSAqIC1zbGlkZVdpZHRoICsgJ3B4J30sIDMwMCwgJ2Vhc2VJbk91dEV4cG8nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaW5kZXggPSB0b3RhbFNsaWRlcyAtIDE7XG4gICAgICAgICAgbGFzdEl0ZW0uYXBwZW5kVG8oJGhvbGRlcik7XG4gICAgICAgICAgJGhvbGRlci50cmFuc2l0aW9uKHt4OiBpbmRleCAqIC1zbGlkZVdpZHRoICsgJ3B4J30sIDApO1xuICAgICAgICAgIGlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG90YWxTbGlkZXM6XG4gICAgICAgICRidWxsZXRzLmVxKDApLmFkZENsYXNzKCdvbicpO1xuICAgICAgICBmaXJzdEl0ZW0uYXBwZW5kVG8oJGhvbGRlcik7XG4gICAgICAgICRob2xkZXIudHJhbnNpdGlvbih7eDogKGluZGV4IC0gMikgKiAtc2xpZGVXaWR0aCArICdweCd9LCAwKTtcbiAgICAgICAgJGhvbGRlci50cmFuc2l0aW9uKHt4OiAoaW5kZXggLSAxKSAqIC1zbGlkZVdpZHRoICsgJ3B4J30sIDMwMCwgJ2Vhc2VJbk91dEV4cG8nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICAgIGZpcnN0SXRlbS5wcmVwZW5kVG8oJGhvbGRlcik7XG4gICAgICAgICAgJGhvbGRlci50cmFuc2l0aW9uKHt4OiBpbmRleCAqIC1zbGlkZVdpZHRoICsgJ3B4J30sIDApO1xuICAgICAgICAgIGlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIC8vJGhvbGRlci5jc3Moeyd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWCgnICsgKGluZGV4ICogLXNsaWRlV2lkdGgpICsgJ3B4KScsICd0cmFuc2l0aW9uJzogJ2FsbCAwLjNzIGN1YmljLWJlemllcigxLC4wMSwuMzIsMSknIH0pO1xuICAgICAgICAkaG9sZGVyLnRyYW5zaXRpb24oe3g6IGluZGV4ICogLXNsaWRlV2lkdGggKyAncHgnfSwgMzAwLCAnZWFzZUluT3V0RXhwbycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9O1xuICB0aGlzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICBfdGVtcGxhdGVJbml0KCk7XG4gIH07XG4gIHRoaXMucmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgLy/Qv9C+0LTRgdGC0YDQsNGF0L7QstC60LAg0L7RgiDQsdCw0LPQvtCyINC/0YDQuCDQvNC90L7Qs9C+0LrRgNCw0YLQvdC+0Lwg0LLRi9C30L7QstC1INGA0LXQvdC00LXRgNCwXG4gICAgY2xlYXJJbnRlcnZhbChfaW50ZXJ2YWwpO1xuICAgICQoJy5qcy1zbGlkZXInKS5yZW1vdmUoKTtcbiAgICAvL1xuICAgIF90ZW1wbGF0ZUluc2VydERhdGEoYXJyYXlTbGlkZXMpO1xuICAgIF90ZW1wbGF0ZUJ1aWxkKCk7XG4gICAgX3ByZXBhcmVBbmltYXRpb24oKTtcbiAgICBfYWRkRXZlbnRzKCk7XG4gICAgX3NldHRpbmdJbnRlcnZhbCgpO1xuICB9O1xufTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
