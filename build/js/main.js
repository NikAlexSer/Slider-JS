var Controller=function(){function t(){$(".input-form").on("click",".js-data",function(){i=e(),n(),$(".input-form").hide()})}function e(){var t=$("#arrayURL").val().split(",");return t.forEach(function(e,n){t[n]=e.replace(/["\n \u005B\u005D]/g,"")}),t}function n(){o=new Preview(i),o.render()}function c(t){$(".js-slider-preview").hide(),a=new Slider(t,r),a.render()}var i=[],o={},a={},r={urlArray:["https://c2.staticflickr.com/4/3117/3175014052_7484da1205_z.jpg","https://c2.staticflickr.com/4/3262/3175014554_db597bbb73_z.jpg","https://c2.staticflickr.com/4/3670/8813562512_229f5cf24a_z.jpg","https://c1.staticflickr.com/9/8440/7787237516_b46aa5fabb_c.jpg","https://c2.staticflickr.com/4/3404/3449526371_0454515b13_z.jpg","https://c2.staticflickr.com/4/3602/3450323658_ab5961a0aa_z.jpg","https://c1.staticflickr.com/3/2491/3751647375_4695b378de_z.jpg","https://c1.staticflickr.com/3/2443/3752426198_ebe03fa615_z.jpg","https://c2.staticflickr.com/2/1032/3175022066_57fce505be_z.jpg","https://c1.staticflickr.com/3/2528/3751624573_08815f8950_z.jpg"],duration:1e3,slideWidth:500};return{init:function(){$("#arrayURL").val(r.urlArray),t()},receiveDataPreview:function(t){c(t)}}}();$(function(){Controller.init()});var Preview=function(t){function e(){l=Handlebars.compile($("#preview-template").html())}function n(t){$(".js-slider-preview").html(l({urls:t}))}function c(t,e){var n=[];return t.forEach(function(t,c){n[c]={img:t,comments:e[c]}}),n}function i(){s.splice($(this).parent().index(),1),f.render()}function o(){var t=$(".comment");t.each(function(e){d[e]=t.eq(e).val()}),a()}function a(){Controller.receiveDataPreview(c(s,d))}function r(){s=t,e(),$(".js-slider-preview").on("click",".btnDel",i).on("click",".btnSave",o)}var l,s=[],d=[],f=this;r(),this.render=function(){n(s)}},Slider;Slider=function(t,e){function n(){s=Handlebars.compile($("#slider-template").html())}function c(t){$(".js-slider").html(s({slidesTemp:t}))}function i(){var t=$(".js-content-holder li"),n=$(".js-content-holder li").first(),c=$(".js-content-holder li").last();$(".js-bullets").eq(0).addClass("active"),$(".js-content-holder li").eq(0).addClass("active"),n.clone().appendTo(".js-content-holder").addClass("clone"),c.clone().prependTo(".js-content-holder").addClass("clone"),$(".js-content-holder").css({width:t.width()*(t.length+2),marginLeft:-e.slideWidth})}function o(){d=setInterval(function(){r(1)},e.duration)}function a(){$(".js-content-holder").css({transform:"translateX(-"+($(".active").index()-1)*e.slideWidth+"px) "}).addClass("animated")}function r(t){console.log($(".active").index()),1===t?$(".active").index()===$(".js-content-holder li").length-1?($(".js-content-holder").css({transform:"translateX(-0px) "}).removeClass("animated").add($(".active")).removeClass("active"),$(".js-content-holder li").eq(1).addClass("active"),$(".js-bullets").eq(0).addClass("active")):($(".active").removeClass("active").next().addClass("active"),a()):t===-1&&($(".active").removeClass("active").prev().addClass("active"),a()),console.log($(".active").index())}function l(){n(),$(".js-slider").on("click",".control-next",function(){r(1)}).on("click",".control-prev",function(){r(-1)}).on("click",".js-bullets",function(){r(-1)}).on("mouseenter",function(){clearInterval(d)}).on("mouseleave",function(){o()})}var s,d;l(),this.render=function(){c(t),i(),o()}};