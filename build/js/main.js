var Controller=function(){function t(){$(".input-form").on("click",".js-data",function(){c=e(),n(),$(".input-form").hide()})}function e(){var t=$("#arrayURL").val().split(",");return t.forEach(function(e,n){t[n]=e.replace(/["\n \u005B\u005D]/g,"")}),t}function n(){a=new Preview(c),a.render()}function i(t){$(".js-slider-preview").hide(),r=new Slider(t,o),r.render()}var c=[],a={},r={},o={urlArray:["https://c2.staticflickr.com/4/3117/3175014052_7484da1205_z.jpg","https://c2.staticflickr.com/4/3262/3175014554_db597bbb73_z.jpg","https://c2.staticflickr.com/4/3670/8813562512_229f5cf24a_z.jpg","https://c1.staticflickr.com/9/8440/7787237516_b46aa5fabb_c.jpg","https://c2.staticflickr.com/4/3404/3449526371_0454515b13_z.jpg","https://c2.staticflickr.com/4/3602/3450323658_ab5961a0aa_z.jpg","https://c1.staticflickr.com/3/2491/3751647375_4695b378de_z.jpg","https://c1.staticflickr.com/3/2443/3752426198_ebe03fa615_z.jpg","https://c2.staticflickr.com/2/1032/3175022066_57fce505be_z.jpg","https://c1.staticflickr.com/3/2528/3751624573_08815f8950_z.jpg"],duration:1e3,slideWidth:500};return{init:function(){$("#arrayURL").val(o.urlArray),t()},receiveDataPreview:function(t){i(t)}}}();$(function(){Controller.init()});var Preview=function(t){function e(){s=Handlebars.compile($("#preview-template").html())}function n(t){$(".js-slider-preview").html(s({urls:t}))}function i(t,e){var n=[];return t.forEach(function(t,i){n[i]={img:t,comments:e[i]}}),n}function c(){l.splice($(this).parent().index(),1),f.render()}function a(){var t=$(".comment");t.each(function(e){d[e]=t.eq(e).val()}),r()}function r(){Controller.receiveDataPreview(i(l,d))}function o(){l=t,e(),$(".js-slider-preview").on("click",".btnDel",c).on("click",".btnSave",a)}var s,l=[],d=[],f=this;o(),this.render=function(){n(l)}},Slider;Slider=function(t,e){function n(){l=Handlebars.compile($("#slider-template").html())}function i(t){$(".js-slider").html(l({slidesTemp:t}))}function c(){var t=$(".js-content-holder li"),n=t.first();$(".js-bullets").eq(0).addClass("active"),n.addClass("active").clone().appendTo(".js-content-holder").addClass("clone"),$(".js-content-holder").css({width:t.width()*(t.length+2),marginLeft:-e.slideWidth})}function a(){d=setInterval(function(){o(1)},e.duration)}function r(){$(".js-content-holder").css({transform:"translateX(-"+($(".active").index()-1)*e.slideWidth+"px) "}).addClass("animated")}function o(t){1===t?$(".active").index()===$(".js-content-holder li").length-1?($(".js-content-holder").css({transform:"translateX(-0px) "}).removeClass("animated").add($(".active")).removeClass("active"),$(".js-content-holder li").eq(1).addClass("active"),$(".js-bullets").eq(0).addClass("active")):($(".active").removeClass("active").next().addClass("active"),r()):t===-1&&($(".active").removeClass("active").prev().addClass("active"),r())}function s(){n(),$(".js-slider").on("click",".control-next",function(){o(1)}).on("click",".control-prev",function(){o(-1)}).on("click",".js-bullets",function(){o(-1)}).on("mouseenter",function(){clearInterval(d)}).on("mouseleave",function(){a()})}var l,d;s(),this.render=function(){i(t),c(),a()}};