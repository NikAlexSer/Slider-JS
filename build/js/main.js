var Controller=function(){function t(){$(".input-form").on("click",".js-data",function(){c=n(),i(),$(".input-form").hide()})}function n(){var t=$("#arrayURL").val().split(",");return t.forEach(function(n,i){t[i]=n.replace(/["\n \u005B\u005D]/g,"")}),t}function i(){r=new Preview(c),r.init(),r.render()}function e(t){$(".js-slider-preview").hide(),o=new Slider(t),o.init(),o.render()}var c=[],r={},o={},a={defaultOpt:["https://c2.staticflickr.com/4/3117/3175014052_7484da1205_z.jpg","https://c2.staticflickr.com/4/3262/3175014554_db597bbb73_z.jpg","https://c2.staticflickr.com/4/3670/8813562512_229f5cf24a_z.jpg","https://c1.staticflickr.com/9/8440/7787237516_b46aa5fabb_c.jpg","https://c2.staticflickr.com/4/3404/3449526371_0454515b13_z.jpg","https://c2.staticflickr.com/4/3602/3450323658_ab5961a0aa_z.jpg","https://c1.staticflickr.com/3/2491/3751647375_4695b378de_z.jpg","https://c1.staticflickr.com/3/2443/3752426198_ebe03fa615_z.jpg","https://c2.staticflickr.com/2/1032/3175022066_57fce505be_z.jpg","https://c1.staticflickr.com/3/2528/3751624573_08815f8950_z.jpg"]};return{init:function(){$("#arrayURL").val(a.defaultOpt),t()},receiveDataPreview:function(t){e(t)}}}();$(function(){Controller.init()});var Preview=function(t){function n(){a=Handlebars.compile($("#preview-template").html())}function i(t){$(".js-slider-preview").html(a({urls:t}))}function e(t,n){var i=[];return t.forEach(function(t,e){i[e]={img:t,comments:n[e]}}),i}function c(){l.splice($(this).parent().index(),1),f.render()}function r(){var t=$(".comment");t.each(function(n){s[n]=t.eq(n).val()}),o()}function o(){Controller.receiveDataPreview(e(l,s))}var a,l=[],s=[],f=this;this.init=function(){l=t,n(),$(".js-slider-preview").on("click",".btnDel",c).on("click",".btnSave",r)},this.render=function(){i(l)}},Slider=function(t){function n(){a=Handlebars.compile($("#slider-template").html())}function i(t){$(".js-slider").html(a({slidesTemp:t}))}function e(){o.css({width:o.children("li:first-child").width()*(o.children("li").length+2)})}function c(){var t=1e3;l=setInterval(function(){r()},t)}function r(){console.log("start",s),$(".clone").remove(),$("li").eq(0).clone().addClass("clone").appendTo(o),o.css("transform","translateX(-"+500*s+"px) ").addClass("animated"),s++,console.log("end",s),s===$(".js-content-holder li").length+1&&(o.css("transform","translateX(-0px) ").removeClass("animated"),s=1,console.log("AHTUNG"))}var o,a,l,s=0;this.init=function(){n()},this.render=function(){o=$(".js-content-holder"),i(t),e(),c()}};