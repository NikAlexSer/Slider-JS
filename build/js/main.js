function sendValues(n){slider=new Slider(n),slider.init(),slider.render()}function main(){$('.input-form input[name="button"]').click(function(){preview=new Preview,preview.init(),preview.render()})}var slider,preview;$(document).ready(function(){main()});var Preview=function(){function n(){d=$("#preview-template").html(),p=Handlebars.compile(d)}function e(n){f={urls:n},v=p(f)}function i(){$("body").append(v)}function t(){var n=$("#arrayURL").val().split(",");return n.forEach(function(n,e,i){i[e]=i[e].replace(/["\n \u005B\u005D]/g,"")}),n}function o(n,e){n.forEach(function(n,i,t){w[i]={img:t[i],com:e[i]}})}function r(){h.splice($(this).parent().index(),1),j.render()}function s(){$(".comment").each(function(n){x[n]=$(".comment")[n].value}),a.hide(),o(h,x),sendValues(w)}function c(){a=$(".js-slider-preview"),l=$('.js-slider-preview input[value="Удалить"]'),u=$('.js-slider-preview input[value="Сохранить"]'),l.on("click",r),u.on("click",s)}var a,l,u,d,p,f,v,m=[],h=[],x=[],w=[],j=this;this.init=function(){h=m=t(),$(".input-form").hide(),n()},this.render=function(){$(".js-slider-preview").remove(),e(h),i(),c()}},Slider=function(n){function e(){j=$("#slider-template").html(),b=Handlebars.compile(j)}function i(n){k={slidesTemp:n},g=b(k)}function t(){$("body").append(g)}function o(){f=$(".control-next"),v=$(".control-prev"),m=$(".js-content-holder li"),w=$(".js-slider"),x=$(".js-content-holder"),h=$(".js-nav span"),h.eq(I).addClass("on"),d=m.first(),p=m.last(),C=!1,a=temp=m.length,u=$(".js-content-holder img").width(),x.css({width:u*a})}function r(){h.on,f.on("click",function(){c(1)}),v.on("click",function(){c(-1)}),w.on("mouseenter",function(){clearInterval(l)}).on("mouseleave",function(){s()})}function s(){l=setInterval(function(){c(1)},E)}function c(n){if(!C)switch($(".on").removeClass("on"),C=!0,I+=n,h.eq(I).addClass("on"),console.log("Ahtung!",I),I){case-1:h.eq(a-1).addClass("on"),p.prependTo(x),x.transition({x:(I+2)*-u+"px"},0),x.transition({x:(I+1)*-u+"px"},150,"easeInOutExpo",function(){I=a-1,p.appendTo(x),x.transition({x:I*-u+"px"},0),C=!1});break;case a:h.eq(0).addClass("on"),d.appendTo(x),x.transition({x:(I-2)*-u+"px"},0),x.transition({x:(I-1)*-u+"px"},150,"easeInOutExpo",function(){I=0,d.prependTo(x),x.transition({x:I*-u+"px"},0),C=!1});break;default:x.transition({x:I*-u+"px"},300,"easeInOutExpo",function(){C=!1})}}var a,l,u,d,p,f,v,m,h,x,w,j,b,k,g,I=0,C=!1,E=100;this.init=function(){e()},this.render=function(){clearInterval(l),$(".js-slider").remove(),i(n),t(),o(),r(),s()}};