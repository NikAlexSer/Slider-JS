function sendValues(n){slider=new Slider(n),slider.init(),slider.render()}var slider,preview;$(document).ready(function(){console.log("Ahtung"),$('.input-form input[name="button"]').click(function(){preview=new Preview,preview.init(),preview.render()})});var Preview=function(){function n(){d=$("#preview-template").html(),p=Handlebars.compile(d)}function e(n){f={urls:n},v=p(f)}function i(){$("body").append(v)}function t(){var n=$("#arrayURL").val().split(",");return n.forEach(function(n,e,i){i[e]=i[e].replace(/["\n \u005B\u005D]/g,"")}),n}function o(n,e){n.forEach(function(n,i,t){w[i]={img:t[i],com:e[i]}})}function r(){m.splice($(this).parent().index(),1),j.render()}function c(){$(".comment").each(function(n){x[n]=$(".comment")[n].value}),a.hide(),o(m,x),sendValues(w)}function s(){a=$(".js-slider-preview"),u=$('.js-slider-preview input[value="Удалить"]'),l=$('.js-slider-preview input[value="Сохранить"]'),u.on("click",r),l.on("click",c)}var a,u,l,d,p,f,v,h=[],m=[],x=[],w=[],j=this;this.init=function(){m=h=t(),$(".input-form").hide(),n()},this.render=function(){$(".js-slider-preview").remove(),e(m),i(),s()}},Slider=function(n){function e(){j=$("#slider-template").html(),b=Handlebars.compile(j)}function i(n){g={slidesTemp:n},k=b(g)}function t(){$("body").html(k)}function o(){f=$(".control-next"),v=$(".control-prev"),h=$(".js-content-holder li"),w=$(".js-slider"),x=$(".js-content-holder"),m=$(".js-nav span"),m.eq(I).addClass("on"),d=h.first(),p=h.last(),C=!1,a=temp=h.length,l=$(".js-content-holder img").width(),x.css({width:l*a})}function r(){m.each(function(){$(this).on("click",function(){I=parseInt($(this).data("number"))-1,s(1)})}),f.on("click",function(){s(1)}),v.on("click",function(){s(-1)}),w.on("mouseenter",function(){clearInterval(u)}).on("mouseleave",function(){c()})}function c(){u=setInterval(function(){s(1)},E)}function s(n){if(!C)switch($(".on").removeClass("on"),C=!0,I+=n,m.eq(I).addClass("on"),console.log("Ahtung!",I),I){case-1:m.eq(a-1).addClass("on"),p.prependTo(x),x.transition({x:(I+2)*-l+"px"},0),x.transition({x:(I+1)*-l+"px"},300,"easeInOutExpo",function(){I=a-1,p.appendTo(x),x.transition({x:I*-l+"px"},0),C=!1});break;case a:m.eq(0).addClass("on"),d.appendTo(x),x.transition({x:(I-2)*-l+"px"},0),x.transition({x:(I-1)*-l+"px"},300,"easeInOutExpo",function(){I=0,d.prependTo(x),x.transition({x:I*-l+"px"},0),C=!1});break;default:x.transition({x:I*-l+"px"},300,"easeInOutExpo",function(){C=!1})}}var a,u,l,d,p,f,v,h,m,x,w,j,b,g,k,I=0,C=!1,E=1e3;this.init=function(){e()},this.render=function(){i(n),t(),o(),r(),c()}};