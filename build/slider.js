function sendValues(e,i){slider=new Slider(e,i)}function arrayInit(){var e,i;e=$("#arrayURL").val(),i=e.replace("[",""),i=i.replace("]","");for(var t=0;t<i.length;t++)i=i.replace('"',"");return urlArray=i.split(","),urlArray}function main(){$('.input-form input[name="button"]').click(function(){arrayInit();preview=new Preview})}var Preview=function(){var e=this;this.init=function(i){var t=$("#preview-template").html(),l=Handlebars.compile(t),r={urls:i},n=l(r);$("body").append(n),$(".input-form").remove(),e.arrayOfImgs=$("img"),e.previewBlock=$(".slider-preview"),e.buttonDel=$('.slider-preview input[value="Удалить"]'),e.buttonSave=$('.slider-preview input[value="Сохранить"]')},this.init(urlArray),this.buttonDel.click(function(){$(this).parent().remove()}),this.buttonSave.click(function(){e.previewBlock.css("display","none"),e.arrayOfImgs=$("img"),e.arrayOfComments=$('input[type="text"]'),sendValues(e.arrayOfImgs,e.arrayOfComments)})},Slider=function(e,i){var t=this;this.templateArr=[];var l=function(){t.sliderUl.animate({left:-t.slideWidth},t.animateTime,function(){$(".slider ul li:first-child").appendTo(".slider ul"),t.sliderUl.css("left","")})},r=function(){t.sliderUl.animate({left:+t.slideWidth},t.animateTime,function(){$(".slider ul li:last-child").prependTo(".slider ul"),t.sliderUl.css("left","")})};this.nextSlide=function(){t.interval=window.setInterval(function(){1==t.frame?l():r()},t.slideInterval)},this.stopSlider=function(){window.clearInterval(t.interval)},this.init=function(){var e=$("#slider-template").html(),i=Handlebars.compile(e),l={slidesTemp:t.templateArr};html=i(l),$("body").append(html),t.$sliderLi=$(".slider li"),t.$sliderImg=$(".slider img"),t.sliderUl=$(".slider ul"),t.prev=$(".control_prev"),t.next=$(".control_next"),t.holder=$(".holder"),t.slideCount=t.$sliderLi.length,t.slideWidth=t.$sliderImg.width(),t.slideHeight=t.$sliderImg.height(),t.sliderUlWidth=t.slideCount*t.slideWidth,t.interval=0,t.slideInterval=2e3,t.animateTime=700,t.frame=1,t.holder.css({width:t.slideWidth,height:t.slideHeight}),t.sliderUl.css({width:this.sliderUlWidth,marginLeft:-t.slideWidth}),$(".slider ul li:last-child").prependTo(".slider ul"),t.nextSlide()},this.extractValues=function(e,i){this.slides=[];for(var l=0;l<e.length;l++)this.slides[l]=e[l].src;this.comments=[];for(var r=0;r<i.length;r++)this.comments[r]=i[r].value;for(var n=0;n<this.slides.length;n++)t.templateArr[n]={img:this.slides[n],comment:this.comments[n]}},this.extractValues(e,i),this.init(),this.holder.mouseenter(function(){t.stopSlider()}),this.holder.mouseleave(function(){t.nextSlide()}),this.prev.click(function(){t.animateTime=100,r(),t.animateTime=700}),this.next.click(function(){t.animateTime=100,l(),t.animateTime=700})};$(document).ready(function(){main()});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNsaWRlci5qcyJdLCJuYW1lcyI6WyJzZW5kVmFsdWVzIiwiYXJyU2xpZGVzIiwiYXJyQ29tIiwic2xpZGVyIiwiU2xpZGVyIiwiYXJyYXlJbml0IiwiaW5wdXRWYWwiLCJ0ZW1wVmFsIiwiJCIsInZhbCIsInJlcGxhY2UiLCJ4IiwibGVuZ3RoIiwidXJsQXJyYXkiLCJzcGxpdCIsIm1haW4iLCJjbGljayIsInByZXZpZXciLCJQcmV2aWV3IiwidGhpcyQiLCJ0aGlzIiwiaW5pdCIsInNvdXJjZSIsImh0bWwiLCJ0ZW1wbGF0ZSIsIkhhbmRsZWJhcnMiLCJjb21waWxlIiwiY29udGV4dCIsInVybHMiLCJhcHBlbmQiLCJyZW1vdmUiLCJhcnJheU9mSW1ncyIsInByZXZpZXdCbG9jayIsImJ1dHRvbkRlbCIsImJ1dHRvblNhdmUiLCJwYXJlbnQiLCJjc3MiLCJhcnJheU9mQ29tbWVudHMiLCJzbGlkZXMiLCJjb21tZW50cyIsInRlbXBsYXRlQXJyIiwibW92ZVJpZ2h0Iiwic2xpZGVyVWwiLCJhbmltYXRlIiwibGVmdCIsInNsaWRlV2lkdGgiLCJhbmltYXRlVGltZSIsImFwcGVuZFRvIiwibW92ZUxlZnQiLCJwcmVwZW5kVG8iLCJuZXh0U2xpZGUiLCJpbnRlcnZhbCIsIndpbmRvdyIsInNldEludGVydmFsIiwiZnJhbWUiLCJzbGlkZUludGVydmFsIiwic3RvcFNsaWRlciIsImNsZWFySW50ZXJ2YWwiLCJzb3VyY2VJbWciLCJ0ZW1wbGF0ZUltZyIsImNvbnRleHRJbWciLCJzbGlkZXNUZW1wIiwiJHNsaWRlckxpIiwiJHNsaWRlckltZyIsInByZXYiLCJuZXh0IiwiaG9sZGVyIiwic2xpZGVDb3VudCIsIndpZHRoIiwic2xpZGVIZWlnaHQiLCJoZWlnaHQiLCJzbGlkZXJVbFdpZHRoIiwibWFyZ2luTGVmdCIsImV4dHJhY3RWYWx1ZXMiLCJhIiwic3JjIiwiYiIsInZhbHVlIiwiYyIsImltZyIsImNvbW1lbnQiLCJtb3VzZWVudGVyIiwibW91c2VsZWF2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MkUsVUFBVUMsTUFBTSxXQUlkckUiLCJmaWxlIjoic2xpZGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFByZXZpZXcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGhpcyQgPSB0aGlzO1xuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKHVybEFycmF5KSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSAkKFwiI3ByZXZpZXctdGVtcGxhdGVcIikuaHRtbCgpLFxuICAgICAgICAgICAgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoc291cmNlKSxcbiAgICAgICAgICAgIGNvbnRleHQgPSB7dXJsczogdXJsQXJyYXl9LFxuICAgICAgICAgICAgaHRtbCA9IHRlbXBsYXRlKGNvbnRleHQpO1xuICAgICAgICAkKCdib2R5JykuYXBwZW5kKGh0bWwpO1xuICAgICAgICAkKCcuaW5wdXQtZm9ybScpLnJlbW92ZSgpO1xuICAgICAgICB0aGlzJC5hcnJheU9mSW1ncyA9ICQoJ2ltZycpO1xuICAgICAgICB0aGlzJC5wcmV2aWV3QmxvY2sgPSAkKCcuc2xpZGVyLXByZXZpZXcnKTtcbiAgICAgICAgdGhpcyQuYnV0dG9uRGVsID0gICQoJy5zbGlkZXItcHJldmlldyBpbnB1dFt2YWx1ZT1cItCj0LTQsNC70LjRgtGMXCJdJyk7XG4gICAgICAgIHRoaXMkLmJ1dHRvblNhdmUgPSAkKCcuc2xpZGVyLXByZXZpZXcgaW5wdXRbdmFsdWU9XCLQodC+0YXRgNCw0L3QuNGC0YxcIl0nKTtcbiAgICB9O1xuICAgIHRoaXMuaW5pdCh1cmxBcnJheSk7XG4gICAgdGhpcy5idXR0b25EZWwuY2xpY2soIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmUoKTtcbiAgICB9KTtcbiAgICB0aGlzLmJ1dHRvblNhdmUuY2xpY2soIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcyQucHJldmlld0Jsb2NrLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgIHRoaXMkLmFycmF5T2ZJbWdzID0gJCgnaW1nJyk7XG4gICAgICAgIHRoaXMkLmFycmF5T2ZDb21tZW50cyA9ICQoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJyk7XG4gICAgICAgIHNlbmRWYWx1ZXModGhpcyQuYXJyYXlPZkltZ3MsIHRoaXMkLmFycmF5T2ZDb21tZW50cyk7XG4gICAgfSk7XG59O1xuXG52YXIgU2xpZGVyID0gZnVuY3Rpb24oc2xpZGVzLCBjb21tZW50cykge1xuICAgIHZhciB0aGlzJCA9IHRoaXM7XG4gICAgdGhpcy50ZW1wbGF0ZUFyciA9ICBbXTtcbiAgICAvL9CU0LLQuNC20LXQvdC40Y8g0LLQu9C10LLQviwg0LLQv9GA0LDQstC+XG4gICAgdmFyIG1vdmVSaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcyQuc2xpZGVyVWwuYW5pbWF0ZSh7XG4gICAgICAgICAgICBsZWZ0OiAtIHRoaXMkLnNsaWRlV2lkdGhcbiAgICAgICAgfSwgdGhpcyQuYW5pbWF0ZVRpbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoJy5zbGlkZXIgdWwgbGk6Zmlyc3QtY2hpbGQnKS5hcHBlbmRUbygnLnNsaWRlciB1bCcpO1xuICAgICAgICAgICAgdGhpcyQuc2xpZGVyVWwuY3NzKCdsZWZ0JywgJycpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHZhciBtb3ZlTGVmdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcyQuc2xpZGVyVWwuYW5pbWF0ZSh7XG4gICAgICAgICAgICBsZWZ0OiArIHRoaXMkLnNsaWRlV2lkdGhcbiAgICAgICAgfSwgdGhpcyQuYW5pbWF0ZVRpbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoJy5zbGlkZXIgdWwgbGk6bGFzdC1jaGlsZCcpLnByZXBlbmRUbygnLnNsaWRlciB1bCcpO1xuICAgICAgICAgICAgdGhpcyQuc2xpZGVyVWwuY3NzKCdsZWZ0JywgJycpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8v0KTRg9C90LrRhtC40Y8g0LLQutC70Y7Rh9C10L3QuNGPINGB0LvQsNC50LTQtdGA0LBcbiAgICB0aGlzLm5leHRTbGlkZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzJC5pbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzJC5mcmFtZSA9PSAxKSB7XG4gICAgICAgICAgICAgICAgbW92ZVJpZ2h0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtb3ZlTGVmdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzJC5zbGlkZUludGVydmFsKTtcbiAgICB9O1xuICAgIC8v0YTRg9C90LrRhtC40Y8g0L7RgdGC0LDQvdC+0LLQutC4XG4gICAgdGhpcy5zdG9wU2xpZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMkLmludGVydmFsKTtcbiAgICB9O1xuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc291cmNlSW1nICAgPSAkKFwiI3NsaWRlci10ZW1wbGF0ZVwiKS5odG1sKCksXG4gICAgICAgICAgICB0ZW1wbGF0ZUltZyA9IEhhbmRsZWJhcnMuY29tcGlsZShzb3VyY2VJbWcpLFxuICAgICAgICAgICAgY29udGV4dEltZyA9IHtzbGlkZXNUZW1wOiB0aGlzJC50ZW1wbGF0ZUFyciB9O1xuICAgICAgICBodG1sID0gdGVtcGxhdGVJbWcoY29udGV4dEltZyk7XG4gICAgICAgICQoJ2JvZHknKS5hcHBlbmQoaHRtbCk7XG4gICAgICAgIHRoaXMkLiRzbGlkZXJMaSA9ICAkKCcuc2xpZGVyIGxpJyk7XG4gICAgICAgIHRoaXMkLiRzbGlkZXJJbWcgPSAgJCgnLnNsaWRlciBpbWcnKTtcbiAgICAgICAgdGhpcyQuc2xpZGVyVWwgPSAkKCcuc2xpZGVyIHVsJyk7XG4gICAgICAgIHRoaXMkLnByZXYgPSAkKCcuY29udHJvbF9wcmV2Jyk7XG4gICAgICAgIHRoaXMkLm5leHQgPSAkKCcuY29udHJvbF9uZXh0Jyk7XG4gICAgICAgIHRoaXMkLmhvbGRlciA9ICQoJy5ob2xkZXInKTtcbiAgICAgICAgdGhpcyQuc2xpZGVDb3VudCA9IHRoaXMkLiRzbGlkZXJMaS5sZW5ndGg7XG4gICAgICAgIHRoaXMkLnNsaWRlV2lkdGggPSB0aGlzJC4kc2xpZGVySW1nLndpZHRoKCk7XG4gICAgICAgIHRoaXMkLnNsaWRlSGVpZ2h0ID0gdGhpcyQuJHNsaWRlckltZy5oZWlnaHQoKTtcbiAgICAgICAgdGhpcyQuc2xpZGVyVWxXaWR0aCA9IHRoaXMkLnNsaWRlQ291bnQgKiB0aGlzJC5zbGlkZVdpZHRoO1xuICAgICAgICB0aGlzJC5pbnRlcnZhbCA9IDA7XG4gICAgICAgIHRoaXMkLnNsaWRlSW50ZXJ2YWwgPSAyMDAwO1xuICAgICAgICB0aGlzJC5hbmltYXRlVGltZSA9IDcwMDtcbiAgICAgICAgdGhpcyQuZnJhbWUgPSAxO1xuICAgICAgICB0aGlzJC5ob2xkZXIuY3NzKHsgd2lkdGg6IHRoaXMkLnNsaWRlV2lkdGgsIGhlaWdodDogdGhpcyQuc2xpZGVIZWlnaHQgfSk7XG4gICAgICAgIHRoaXMkLnNsaWRlclVsLmNzcyh7IHdpZHRoOiB0aGlzLnNsaWRlclVsV2lkdGgsIG1hcmdpbkxlZnQ6IC0gdGhpcyQuc2xpZGVXaWR0aCB9KTtcbiAgICAgICAgJCgnLnNsaWRlciB1bCBsaTpsYXN0LWNoaWxkJykucHJlcGVuZFRvKCcuc2xpZGVyIHVsJyk7XG4gICAgICAgIHRoaXMkLm5leHRTbGlkZSgpO1xuICAgIH07XG4gICAgdGhpcy5leHRyYWN0VmFsdWVzID0gZnVuY3Rpb24oc2xpZGVzLCBjb21tZW50cykge1xuICAgICAgICB0aGlzLnNsaWRlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IHNsaWRlcy5sZW5ndGg7IGErKykge1xuICAgICAgICAgICAgdGhpcy5zbGlkZXNbYV0gPSBzbGlkZXNbYV0uc3JjXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb21tZW50cyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBiID0gMDsgYiA8IGNvbW1lbnRzLmxlbmd0aDsgYisrKSB7XG4gICAgICAgICAgICB0aGlzLmNvbW1lbnRzW2JdID0gY29tbWVudHNbYl0udmFsdWVcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IHRoaXMuc2xpZGVzLmxlbmd0aDsgYysrKSB7XG4gICAgICAgICAgICB0aGlzJC50ZW1wbGF0ZUFycltjXSA9IHtpbWc6IHRoaXMuc2xpZGVzW2NdLCBjb21tZW50OiB0aGlzLmNvbW1lbnRzW2NdfVxuICAgICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmV4dHJhY3RWYWx1ZXMoc2xpZGVzLCBjb21tZW50cyk7XG4gICAgdGhpcy5pbml0KCk7XG4gICAgdGhpcy5ob2xkZXIubW91c2VlbnRlciggZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMkLnN0b3BTbGlkZXIoKVxuICAgIH0pO1xuICAgIHRoaXMuaG9sZGVyLm1vdXNlbGVhdmUoIGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzJC5uZXh0U2xpZGUoKVxuICAgIH0pO1xuICAgIHRoaXMucHJldi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMkLmFuaW1hdGVUaW1lID0gMTAwO1xuICAgICAgICBtb3ZlTGVmdCgpO1xuICAgICAgICB0aGlzJC5hbmltYXRlVGltZSA9IDcwMDtcbiAgICB9KTtcbiAgICB0aGlzLm5leHQuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzJC5hbmltYXRlVGltZSA9IDEwMDtcbiAgICAgICAgbW92ZVJpZ2h0KCk7XG4gICAgICAgIHRoaXMkLmFuaW1hdGVUaW1lID0gNzAwO1xuICAgIH0pO1xufTtcblxuLy/Qn9C10YDQtdC00LDRh9CwINC00LDQvdC90YvRhSDQuNC3INC/0YDQtdCy0YzRjiDQsiDRgdC70LDQudC00LXRgFxuZnVuY3Rpb24gc2VuZFZhbHVlcyhhcnJTbGlkZXMsIGFyckNvbSkge1xuICAgIHNsaWRlciA9IG5ldyBTbGlkZXIoYXJyU2xpZGVzLCBhcnJDb20pO1xufVxuLy/Qn9C+0LvRg9GH0LXQvdC40LUg0Lgg0L7QsdGA0LDQsdC+0YLQutCwINC80LDRgdGB0LjQstCwINGD0YDQu9C+0LJcbmZ1bmN0aW9uIGFycmF5SW5pdCgpIHtcbiAgICB2YXIgaW5wdXRWYWwsXG4gICAgICAgIHRlbXBWYWw7XG4gICAgaW5wdXRWYWwgPSAkKFwiI2FycmF5VVJMXCIpLnZhbCgpO1xuICAgIHRlbXBWYWwgPSBpbnB1dFZhbC5yZXBsYWNlKCdcXHUwMDVCJywgXCJcIik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g0YPQtNCw0LvQtdC90LjQtSBbXG4gICAgdGVtcFZhbCA9IHRlbXBWYWwucmVwbGFjZSgnXFx1MDA1RCcsIFwiXCIpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDRg9C00LDQu9C10L3QuNC1IF1cbiAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHRlbXBWYWwubGVuZ3RoOyB4KyspIHtcbiAgICAgICAgdGVtcFZhbCA9IHRlbXBWYWwucmVwbGFjZSgnXFx1MDAyMicsIFwiXCIpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vINGD0LTQsNC70LXQvdC40LUgXCJcbiAgICB9XG4gICAgdXJsQXJyYXkgPSB0ZW1wVmFsLnNwbGl0KCcsJyk7XG4gICAgcmV0dXJuIHVybEFycmF5O1xufVxuLy/QntGB0L3QvtCy0L3QsNGPINC40YHQv9C+0LvQvdGP0LXQvNCw0Y8g0YTRg9C90LrRhtC40Y9cbmZ1bmN0aW9uIG1haW4oKSB7XG4gICAgJCgnLmlucHV0LWZvcm0gaW5wdXRbbmFtZT1cImJ1dHRvblwiXScpLmNsaWNrKCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHVybEFycmF5ID0gYXJyYXlJbml0KCk7XG4gICAgICAgIHByZXZpZXcgPSBuZXcgUHJldmlldygpO1xuICAgIH0pO1xufVxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKVxue1xuICAgIHZhciBwcmV2aWV3LFxuICAgICAgICBzbGlkZXI7XG4gICAgbWFpbigpXG59KTtcblxuLypcbiBbXG4gXCJodHRwczovL2MyLnN0YXRpY2ZsaWNrci5jb20vNC8zMTE3LzMxNzUwMTQwNTJfNzQ4NGRhMTIwNV96LmpwZ1wiLFxuIFwiaHR0cHM6Ly9jMi5zdGF0aWNmbGlja3IuY29tLzQvMzI2Mi8zMTc1MDE0NTU0X2RiNTk3YmJiNzNfei5qcGdcIixcbiBcImh0dHBzOi8vYzIuc3RhdGljZmxpY2tyLmNvbS80LzM2NzAvODgxMzU2MjUxMl8yMjlmNWNmMjRhX3ouanBnXCIsXG4gXCJodHRwczovL2MxLnN0YXRpY2ZsaWNrci5jb20vOS84NDQwLzc3ODcyMzc1MTZfYjQ2YWE1ZmFiYl9jLmpwZ1wiLFxuIFwiaHR0cHM6Ly9jMi5zdGF0aWNmbGlja3IuY29tLzQvMzQwNC8zNDQ5NTI2MzcxXzA0NTQ1MTViMTNfei5qcGdcIixcbiBcImh0dHBzOi8vYzIuc3RhdGljZmxpY2tyLmNvbS80LzM2MDIvMzQ1MDMyMzY1OF9hYjU5NjFhMGFhX3ouanBnXCIsXG4gXCJodHRwczovL2MxLnN0YXRpY2ZsaWNrci5jb20vMy8yNDkxLzM3NTE2NDczNzVfNDY5NWIzNzhkZV96LmpwZ1wiLFxuIFwiaHR0cHM6Ly9jMS5zdGF0aWNmbGlja3IuY29tLzMvMjQ0My8zNzUyNDI2MTk4X2ViZTAzZmE2MTVfei5qcGdcIixcbiBcImh0dHBzOi8vYzIuc3RhdGljZmxpY2tyLmNvbS8yLzEwMzIvMzE3NTAyMjA2Nl81N2ZjZTUwNWJlX3ouanBnXCIsXG4gXCJodHRwczovL2MxLnN0YXRpY2ZsaWNrci5jb20vMy8yNTI4LzM3NTE2MjQ1NzNfMDg4MTVmODk1MF96LmpwZ1wiXG4gXVxuICovIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
